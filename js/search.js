var searchFunc=function(e,t,n){"use strict";var r=$("#local-search-input");r.attr("placeholder","正在载入引索"),$.ajax({url:e,dataType:"xml",success:function(e){var a=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();r.attr("placeholder","请输入关键词");var l=document.getElementById(t),c=document.getElementById(n);l.addEventListener("input",function(){var e='<ul class="search-result-list">',t=this.value.trim().toLowerCase().split(/[\s\-]+/);if(c.innerHTML="",this.value.trim().length<=0)$(document).ready(function(){$(".content_container").show()});else{a.forEach(function(n){var r=!0,a=n.title.trim().toLowerCase(),l=n.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),c=n.url,s=-1,i=-1,o=-1;if(""!=a&&""!=l&&t.forEach(function(e,t){s=a.indexOf(e),i=l.indexOf(e),s<0&&i<0?r=!1:(i<0&&(i=0),0==t&&(o=i))}),r){e+="<li><a href='"+c+"' class='search-result-title'>"+a+"</a>";var u=n.content.trim().replace(/<[^>]+>/g,"");if(o>=0){var h=o-30,m=300;h<0&&(h=0),h+m>u.length&&(u.length<m?m=u.length-h:h=u.length-m);var d=u.substr(h,m);t.forEach(function(e){var t=new RegExp(e,"gi");d=d.replace(t,'<em class="search-keyword">'+e+"</em>")}),e+='<blockquote><p class="search-result">'+d+"...</p></blockquote>"}e+="</li>"}}),e+="</ul>",c.innerHTML=e;for(var n=document.getElementsByClassName("search-result-list"),r=0;r<n.length;r++){0!=n[r].parentNode.getElementsByTagName("li").length&&$(document).ready(function(){$(".content_container").hide()})}}})}})};