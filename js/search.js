var searchFunc=function(e,t,n){"use strict";var r=$("#local-search-input");r.attr("placeholder","正在载入引索"),$.ajax({url:e,dataType:"xml",success:function(e){var a=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();r.attr("placeholder","请输入关键词");var c=document.getElementById(t),l=document.getElementById(n);c.addEventListener("input",function(){var e='<ul class="search-result-list">',t=this.value.trim().toLowerCase().split(/[\s\-]+/);if(l.innerHTML="",this.value.trim().length<=0)return $(document).ready(function(){$(".local-search-css").hide()}),void $(document).ready(function(){$(".content_container").show()});a.forEach(function(n){var r=!0,a=n.title.trim().toLowerCase(),c=n.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),l=n.url,s=-1,o=-1,i=-1;if(""!=a&&""!=c&&t.forEach(function(e,t){s=a.indexOf(e),o=c.indexOf(e),s<0&&o<0?r=!1:(o<0&&(o=0),0==t&&(i=o))}),r){e+="<li><a href='"+l+"' class='search-result-title'>"+a+"</a>";var u=n.content.trim().replace(/<[^>]+>/g,"");if(i>=0){var h=i-30,d=300;h<0&&(h=0),h+d>u.length&&(u.length<d?d=u.length-h:h=u.length-d);var m=u.substr(h,d);t.forEach(function(e){var t=new RegExp(e,"gi");m=m.replace(t,'<em class="search-keyword">'+e+"</em>")}),e+='<blockquote><p class="search-result">'+m+"...</p></blockquote>"}e+="</li>"}}),e+="</ul>",l.innerHTML=e;for(var n=document.getElementsByClassName("search-result-list"),r=0;r<n.length;r++){0!=n[r].parentNode.getElementsByTagName("li").length&&($(document).ready(function(){$(".content_container").hide()}),$(document).ready(function(){$(".local-search-css").show()}))}})}})};